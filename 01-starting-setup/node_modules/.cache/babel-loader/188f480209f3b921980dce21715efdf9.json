{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Spenc\\\\OneDrive\\\\Desktop\\\\Learning React\\\\01-starting-setup\\\\src\\\\components\\\\ProfilePhoto.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport { getDownloadURL, getStorage, ref, uploadBytes } from \"firebase/storage\";\nimport { storage } from '../store/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ProfilePhoto() {\n  _s();\n\n  const [photoURL, setPhotoURL] = useState(\"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\");\n  const [photo, setPhoto] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const {\n    currentUser\n  } = useAuth();\n\n  async function upload(file, currentUser, setLoading) {\n    const fileRef = ref(storage, '/users/image.jpg'); //'internal/profilePhoto/'+currentUser.uid\n\n    setLoading(true);\n    console.log(currentUser.uid);\n    const snapshot = await uploadBytes(fileRef, file);\n    const photoURL = await getDownloadURL(fileRef);\n    updateProfile(currentUser, {\n      photoURL\n    });\n    setLoading(false);\n    alert(\"Uploaded file!\");\n  }\n\n  function handleChange(e) {\n    e.preventDefault();\n\n    if (e.target.files[0]) {\n      setPhoto(e.target.files[0]);\n    }\n  }\n\n  function handleClick() {\n    upload(photo, currentUser, setLoading);\n    console.log(\"I've been clicked\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Profile Photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: photoURL\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClick,\n      children: \"Submit Photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ProfilePhoto, \"xwlxgdK/d4y7VJqk1TzBS/MgT80=\", true);\n\n_c = ProfilePhoto;\nexport default ProfilePhoto;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePhoto\");","map":{"version":3,"names":["React","useState","getDownloadURL","getStorage","ref","uploadBytes","storage","ProfilePhoto","photoURL","setPhotoURL","photo","setPhoto","loading","setLoading","currentUser","useAuth","upload","file","fileRef","console","log","uid","snapshot","updateProfile","alert","handleChange","e","preventDefault","target","files","handleClick"],"sources":["C:/Users/Spenc/OneDrive/Desktop/Learning React/01-starting-setup/src/components/ProfilePhoto.js"],"sourcesContent":["import React from 'react'\r\nimport { useState } from 'react';\r\nimport { getDownloadURL, getStorage, ref, uploadBytes } from \"firebase/storage\";\r\nimport { storage } from '../store/firebase';\r\n\r\n\r\nfunction ProfilePhoto() {\r\n    const [photoURL, setPhotoURL] = useState(\"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\");\r\n    const [photo, setPhoto] = useState(null)\r\n    const [loading, setLoading] = useState(false);\r\n    const { currentUser } = useAuth()\r\n\r\n\r\n    async function upload(file, currentUser, setLoading) {\r\n        const fileRef = ref(storage, '/users/image.jpg');\r\n      //'internal/profilePhoto/'+currentUser.uid\r\n        setLoading(true);\r\n\r\n        console.log(currentUser.uid)\r\n        const snapshot = await uploadBytes(fileRef, file);\r\n        const photoURL = await getDownloadURL(fileRef);\r\n      \r\n        updateProfile(currentUser, {photoURL});\r\n        \r\n        setLoading(false);\r\n        alert(\"Uploaded file!\");\r\n    }\r\n    \r\n\r\n    function handleChange(e) {\r\n        e.preventDefault()\r\n        if (e.target.files[0]) {\r\n          setPhoto(e.target.files[0])\r\n        }\r\n      }\r\n\r\n    function handleClick() {\r\n       upload(photo, currentUser, setLoading);\r\n       console.log(\"I've been clicked\")\r\n    }\r\n\r\n    return (\r\n    <>\r\n    <div>Profile Photo</div>\r\n    <input type=\"file\" accept=\"image/*\" onChange={handleChange}/>\r\n    <img src={photoURL}></img>\r\n    <button onClick={handleClick}>Submit Photo</button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProfilePhoto"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,cAAT,EAAyBC,UAAzB,EAAqCC,GAArC,EAA0CC,WAA1C,QAA6D,kBAA7D;AACA,SAASC,OAAT,QAAwB,mBAAxB;;;;AAGA,SAASC,YAAT,GAAwB;EAAA;;EACpB,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,0FAAD,CAAxC;EACA,MAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM;IAAEa;EAAF,IAAkBC,OAAO,EAA/B;;EAGA,eAAeC,MAAf,CAAsBC,IAAtB,EAA4BH,WAA5B,EAAyCD,UAAzC,EAAqD;IACjD,MAAMK,OAAO,GAAGd,GAAG,CAACE,OAAD,EAAU,kBAAV,CAAnB,CADiD,CAEnD;;IACEO,UAAU,CAAC,IAAD,CAAV;IAEAM,OAAO,CAACC,GAAR,CAAYN,WAAW,CAACO,GAAxB;IACA,MAAMC,QAAQ,GAAG,MAAMjB,WAAW,CAACa,OAAD,EAAUD,IAAV,CAAlC;IACA,MAAMT,QAAQ,GAAG,MAAMN,cAAc,CAACgB,OAAD,CAArC;IAEAK,aAAa,CAACT,WAAD,EAAc;MAACN;IAAD,CAAd,CAAb;IAEAK,UAAU,CAAC,KAAD,CAAV;IACAW,KAAK,CAAC,gBAAD,CAAL;EACH;;EAGD,SAASC,YAAT,CAAsBC,CAAtB,EAAyB;IACrBA,CAAC,CAACC,cAAF;;IACA,IAAID,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,EAAuB;MACrBlB,QAAQ,CAACe,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR;IACD;EACF;;EAEH,SAASC,WAAT,GAAuB;IACpBd,MAAM,CAACN,KAAD,EAAQI,WAAR,EAAqBD,UAArB,CAAN;IACAM,OAAO,CAACC,GAAR,CAAY,mBAAZ;EACF;;EAED,oBACA;IAAA,wBACA;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADA,eAEA;MAAO,IAAI,EAAC,MAAZ;MAAmB,MAAM,EAAC,SAA1B;MAAoC,QAAQ,EAAEK;IAA9C;MAAA;MAAA;MAAA;IAAA,QAFA,eAGA;MAAK,GAAG,EAAEjB;IAAV;MAAA;MAAA;MAAA;IAAA,QAHA,eAIA;MAAQ,OAAO,EAAEsB,WAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJA;EAAA,gBADA;AAQH;;GA3CQvB,Y;;KAAAA,Y;AA6CT,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}